@use '../_globals' as *;
@use 'font' as *;

@mixin TogglerGroup($BEM) {
	.#{$BEM}--inline > .FormField__options {
		margin: 0 prem(-15);
		display: flex;
		flex-flow: row wrap;
	}
	.#{$BEM}--inline > * > .FormField__options__item {
		margin-left: prem(15);
		margin-right: prem(15);
	}
}

@mixin TogglerKnob($BEM, $radio: ($BEM==Radio)) {
	// .#{$BEM} {
	// 	margin-bottom: grid-units(2);
	// }

	.#{$BEM}__input {
		@include sr-only();
	}
	.#{$BEM}__label {
		display: inline-block;
		padding: prem(8) 0;
		padding-left: prem(36);
		position: relative;
	}
	.#{$BEM}__label::before {
		@include icon('');
		float: left;
		margin-top: prem(2);
		margin-left: prem(-36);
		width: prem(20);
		height: prem(20);
		line-height: prem(18);
		@if $radio {
			font-size: prem(14);
			border-radius: 50%;
		} @else {
			font-size: prem(12);
		}
		border: prem(1) solid $color-suld-150;
		transition: all 200ms ease-in;
		transition-property: box-shadow, border-color, background-color;
	}

	// Invalid
	.#{$BEM}__input[aria-invalid='true'] + .#{$BEM}__label {
		color: $color-heidmork-150;
	}
	.#{$BEM}__input[aria-invalid='true'] + .#{$BEM}__label::before,
	.#{$BEM}__input[aria-invalid='true']:checked + .#{$BEM}__label::before {
		border-color: $color-heidmork-100;
	}

	// Focus + Hover
	.#{$BEM}__label[class]:hover::before,
	.#{$BEM}__input:focus + .#{$BEM}__label::before {
		border-color: $color-faxafloi-100;
		box-shadow: inset 0 0 0 2px $color-faxafloi-100;
	}

	// Checked
	.#{$BEM}__input:checked + .#{$BEM}__label::before {
		@if $radio {
			content: $icons-radioball;
		} @else {
			content: $icons-checkmark;
		}
		border-color: transparent;
		background-color: $color-faxafloi-100;
		color: $color-suld-0;
	}

	// Disabled
	.#{$BEM}__input:disabled + .#{$BEM}__label {
		color: $color-suld-150;
	}
	.#{$BEM}__input:disabled + .#{$BEM}__label::before {
		border-color: $color-suld-100;
		background-color: $color-suld-50;
		color: $color-suld-100;
		box-shadow: none;
	}
	// Disabled + Checked
	@if $radio {
		.#{$BEM}__input:disabled:checked + .#{$BEM}__label::before {
			background-color: $color-suld-100;
			color: $color-suld-50;
		}
	}

	// __error
	@if (not $radio) {
		.#{$BEM}__error {
			@include FormField__error($paddingLeft: prem(36), $marginTop: 0);
		}
	}
}

// ===========================================================================

@mixin TogglerButtonsGroup($BEM) {
	.#{$BEM} > .FormField__options {
		margin: 0 prem(-15) prem(-9);
		display: flex;
		flex-flow: row wrap;
	}
	.#{$BEM} > * > .FormField__options__item {
		margin-left: prem(15);
		margin-right: prem(15);
		margin-bottom: prem(30);
	}
	.#{$BEM}--slim > * > .FormField__options__item > label {
		padding: prem(10) prem(36) prem(10) prem(20);
		border-radius: prem(3);
	}

	$mar: prem(30);
	@media #{$mq-tablet_up} {
		.#{$BEM}--2col > * > .FormField__options__item {
			width: calc(50% - #{$mar});
		}
		.#{$BEM}--3col > * > .FormField__options__item {
			width: calc(33.333% - #{$mar});
		}
	}
}

@mixin TogglerButtonsKnob($BEM, $radio: ($BEM==RadioButton)) {
	.#{$BEM}__input {
		@include sr-only();
	}
	.#{$BEM}__label {
		font-weight: 700;
		font-size: prem(16);
		display: inline-block;
		width: 100%;
		padding: prem(22) prem(20) prem(20) prem(24);
		padding-right: prem(46);
		position: relative;
		border: prem(1) solid $color-suld-100;
		transition: all 200ms ease-in;
		transition-property: box-shadow, color, border-color, background-color;
	}

	.#{$BEM}__label::before {
		@include icon('');
		position: absolute;
		top: prem(8);
		right: prem(8);
		width: prem(12);
		height: prem(12);
		line-height: prem(10);
		@if $radio {
			font-size: prem(10);
			border-radius: 50%;
		} @else {
			font-size: prem(8);
		}
		border: prem(1) solid $color-suld-150;
		transition: all 200ms ease-in;
		transition-property: box-shadow, color, border-color, background-color;
	}

	// smalltext
	.#{$BEM}__label > small {
		display: block;
		font-size: prem(12);
		font-weight: 400;
		color: $color-blackish;
	}

	// Focus + Hover
	.#{$BEM}__label:hover,
	.#{$BEM}__input:focus + .#{$BEM}__label {
		border-color: $color-faxafloi-100;
		box-shadow: inset 0 0 0 2px $color-faxafloi-100;
	}

	.#{$BEM}__label:hover::before,
	.#{$BEM}__input:focus + .#{$BEM}__label::before {
		border-color: $color-faxafloi-100;
	}

	// Checked
	.#{$BEM}__input:checked + .#{$BEM}__label {
		color: $color-faxafloi-100;
		border-color: $color-faxafloi-100;
	}
	.#{$BEM}__input:checked + .#{$BEM}__label::before {
		@if $radio {
			content: $icons-radioball;
		} @else {
			content: $icons-checkmark;
		}
		border-color: transparent;
		background-color: $color-faxafloi-100;
		color: $color-suld-0;
	}

	// Invalid
	.#{$BEM}__input[aria-invalid='true'] + .#{$BEM}__label {
		color: $color-heidmork-100;
		border-color: $color-heidmork-100;
	}

	// Disabled
	.#{$BEM}__input:disabled + .#{$BEM}__label {
		color: $color-suld-150;
		border-color: $color-suld-100;
		box-shadow: none;
	}
	.#{$BEM}__input:disabled + .#{$BEM}__label > small {
		color: $color-suld-150;
	}
	.#{$BEM}__input:disabled + .#{$BEM}__label::before {
		border-color: $color-suld-100;
		background-color: $color-suld-50;
		color: $color-suld-100;
		box-shadow: none;
	}
	// Disabled + Checked
	@if $radio {
		.#{$BEM}__input:disabled:checked + .#{$BEM}__label::before {
		}
	}

	// __error
	@if (not $radio) {
		.#{$BEM}__error {
			color: $color-heidmork-150;
			padding-left: prem(36);
		}
	}
}

// ===========================================================================

$InputField-heightI: prem(42);
$InputField-paddingTop: prem(12);
$InputField-heightI--small: prem(38);

$InputField-paddingH: grid-units(2);

// ---------------------------------------------------------------------------

@mixin InputField() {
	@include BodyTextStyle--large($leading: false);
	position: relative;
	display: flex;
	width: 100%;
	background-color: $color-suld-0;
	color: $color-suld-200;
	border: prem(1) solid var(--input-border-color);
	transition: all 400ms ease-in;
	transition-property: color, border-color, box-shadow, background-color;
	border-radius: var(--input-border-radius);
	padding: 0 $InputField-paddingH;
	padding-top: $InputField-paddingTop;
	height: $InputField-heightI + $InputField-paddingTop + prem(2);
	line-height: $InputField-heightI;
}
@mixin InputField--noLabel() {
	padding-top: $InputField-paddingTop / 2;
	padding-bottom: $InputField-paddingTop / 2;
}
@mixin InputField--small() {
	padding-top: 0;
	font-size: $font-base-size;
	height: $InputField-heightI--small + prem(2);
	line-height: $InputField-heightI--small;
}

@mixin InputField--placeholder() {
	color: $color-suld-150;
}
@mixin InputField--filled() {
	--input-border-color: #{$color-faxafloi-100};
}
@mixin InputField--invalid() {
	--input-border-color: #{$color-heidmork-100};
	color: $color-heidmork-100;
}
@mixin InputField--focused() {
	--input-border-color: #{$color-faxafloi-100};
	color: $color-suld-200;
	box-shadow: inset 0 0 0 1px var(--input-border-color);
	outline: 0;
}
@mixin InputField--disabled() {
	--input-border-color: #{$color-suld-100};
	background-color: $color-suld-50;
	color: $color-suld-100;
	cursor: not-allowed;
}
@mixin InputField--readonly() {
	--input-border-color: #{$color-suld-100};
	background-color: $color-suld-50;
}

// ---------------------------------------------------------------------------

@mixin FormField__error($paddingLeft: grid-units(2), $marginTop: prem(9)) {
	color: $color-heidmork-100;
	font-size: prem($font-size-12);
	line-height: prem(14);
	padding-left: $paddingLeft;
	margin-top: $marginTop;

	&::before {
		@include icon($icons-error);
		margin-right: grid-units(1);
		font-size: prem(10);
	}

	&:not([id]) {
		@include WARNING__(
			'should have id atribute to match input[aria-describedby]',
			$pos: after
		);
	}
}
