@use '../_globals' as *;
@use 'font' as *;

@mixin TogglerGroup($BEM) {
	.#{$BEM}--inline > .FormField__options {
		margin: 0 prem(-15);
		display: flex;
		flex-flow: row wrap;
	}
	.#{$BEM}--inline > * > .FormField__options__item {
		margin-left: prem(15);
		margin-right: prem(15);
	}
}

@mixin TogglerKnob($BEM, $radio: ($BEM==Radio)) {
	// .#{$BEM} {
	// 	margin-bottom: grid-units(2);
	// }

	.#{$BEM}__input {
		@include sr-only();
	}
	.#{$BEM}__label {
		display: inline-block;
		font: $var--font-button;
		padding: $var--space-1 0;
		padding-left: prem(36);
		position: relative;
	}
	.#{$BEM}__label::before {
		@include icon('');
		float: left;
		margin-top: prem(2);
		margin-left: prem(-36);
		width: prem(20);
		height: prem(20);
		line-height: prem(18);
		@if $radio {
			border-radius: 50%;
			font-size: prem(14);
		} @else {
			font-size: prem(12);
		}
		border: prem(1) solid $var--color-suld-100;
		transition: all 200ms ease-in;
		transition-property: box-shadow, border-color, background-color, outline;
		outline: 0 solid transparent;
	}

	// Invalid
	.#{$BEM}__input[aria-invalid='true'] + .#{$BEM}__label {
		color: $var--color-heidmork-100;
	}
	.#{$BEM}__input[aria-invalid='true'] + .#{$BEM}__label::before {
		border-color: $var--color-heidmork-100;
	}

	// Focus/Hover
	.#{$BEM}__label[class][class]:hover,
	.#{$BEM}__input[class]:focus + .#{$BEM}__label {
		color: $color-suld-200;
	}
	.#{$BEM}__label[class][class]:hover::before,
	.#{$BEM}__input[class]:focus + .#{$BEM}__label::before {
		border-color: $var--color-faxafloi-100;
		box-shadow: inset 0 0 0 2px $var--color-faxafloi-100;
	}

	// Checked
	.#{$BEM}__input:checked + .#{$BEM}__label::before {
		@if $radio {
			content: $icons-radioball;
		} @else {
			content: $icons-checkmark;
		}
		border-color: transparent;
		background-color: $var--color-faxafloi-100;
		color: $var--color-suld-0;
	}
	// Checked + Invalid
	.#{$BEM}__input[aria-invalid='true']:checked + .#{$BEM}__label::before {
		background-color: $var--color-heidmork-100;
	}

	// Checked + Focus/Hover
	.#{$BEM}__input:checked + .#{$BEM}__label:hover::before,
	.#{$BEM}__input:checked:focus + .#{$BEM}__label::before {
		background-color: $var--color-faxafloi-100;
		outline: prem(1) solid $var--color-faxafloi-100;
		outline-offset: prem(1);
	}

	// Disabled
	.#{$BEM}__input[class]:disabled + .#{$BEM}__label {
		color: $var--color-suld-150;
	}
	.#{$BEM}__input[class]:disabled + .#{$BEM}__label::before {
		border-color: $var--color-suld-100;
		background-color: $var--color-suld-50;
		color: $var--color-suld-100;
		box-shadow: none;
		outline: 0;
	}
	// Disabled + Checked
	@if $radio {
		.#{$BEM}__input:disabled:checked + .#{$BEM}__label::before {
			background-color: $var--color-suld-100;
			color: $var--color-suld-50;
		}
	}

	// __error
	@if (not $radio) {
		.#{$BEM}__error {
			@include FormField__error($paddingLeft: prem(36), $marginTop: 0);
		}
	}
}

// ===========================================================================

@mixin TogglerButtonsGroup($BEM) {
	.#{$BEM} > .FormField__options {
		@include media($mq-phablet_up) {
			margin-right: $var--grid-0-1--neg;
			display: flex;
			flex-flow: row wrap;
		}
	}
	.#{$BEM} > * > .FormField__options__item {
		margin-bottom: $var--space-2;

		@include media($mq-phablet_up) {
			margin-bottom: $var--grid-0-1;
			margin-right: $var--grid-0-1;
			width: $var--grid-6;
		}
		@include media($mq-netbook) {
			width: $var--grid-4;
		}
		@include media($mq-wide) {
			width: $var--grid-3;
		}
	}
	.#{$BEM}--slim {
		@include WARNING__('Deprecated: .' + $BEM + '--slim is no longer supported');
	}
	.#{$BEM}--2col {
		@include WARNING__('Deprecated: .' + $BEM + '--2col is no longer supported');
	}
	.#{$BEM}--3col {
		@include WARNING__('Deprecated: .' + $BEM + '--3col is no longer supported');
	}
}

@mixin TogglerButtonsKnob($BEM, $radio: ($BEM==RadioButton)) {
	@include TogglerKnob($BEM, $radio);

	.#{$BEM}__label {
		font-weight: $var--font-weight--bold;
		width: 100%;
		height: 100%;
		display: flex;
		flex-flow: column;
		justify-content: center;
		padding: $var--space-3;
		padding-left: prem(60);
		border: prem(1) solid $var--color-suld-100;
		transition: all 200ms ease-in;
		transition-property: box-shadow, color, border-color, background-color;
	}
	.#{$BEM}__label > small {
		margin-top: $var--space-0_5;
		display: block;
		font: $var--font-label;
		font-weight: $var--font-weight--normal;
	}

	.#{$BEM}__label::before {
		position: absolute;
		top: 50%;
		left: $var--space-3;
		margin-top: prem(-10);
		margin-left: 0;
	}

	// Focus + Hover
	.#{$BEM}__label:hover,
	.#{$BEM}__input:focus + .#{$BEM}__label {
		border-color: $var--color-faxafloi-100;
		box-shadow: inset 0 0 0 2px $var--color-faxafloi-100;
	}

	// Checked + Focus/Hover
	.#{$BEM}__input:checked + .#{$BEM}__label:hover::before,
	.#{$BEM}__input:checked:focus + .#{$BEM}__label::before {
		outline: 0;
	}

	// Disabled
	.#{$BEM}__input:disabled + .#{$BEM}__label {
		color: $var--color-suld-150;
		border-color: $var--color-suld-100;
		background-color: $var--color-suld-50;
		box-shadow: none;
	}
	.#{$BEM}__input:disabled + .#{$BEM}__label > small {
		color: $var--color-suld-150;
	}

	// __error
	@if (not $radio) {
		.#{$BEM}__error {
			color: $var--color-heidmork-150;
			padding-left: prem(36);
		}
	}
}

// ===========================================================================

// ===========================================================================

$InputField-heightI: prem(42);
$InputField-paddingTop: prem(12);
$InputField-heightI--small: prem(38);

$InputField-paddingH: grid-units(2);

// ---------------------------------------------------------------------------

@mixin InputField() {
	@include BodyTextStyle--large($leading: false);
	position: relative;
	display: flex;
	width: 100%;
	background-color: $var--color-suld-0;
	color: $var--color-suld-200;
	border: prem(1) solid var(--input-border-color);
	transition: all 400ms ease-in;
	transition-property: color, border-color, box-shadow, background-color;
	border-radius: var(--input-border-radius);
	padding: 0 $InputField-paddingH;
	padding-top: $InputField-paddingTop;
	height: $InputField-heightI + $InputField-paddingTop + prem(2);
	line-height: $InputField-heightI;
}
@mixin InputField--noLabel() {
	padding-top: $InputField-paddingTop / 2;
	padding-bottom: $InputField-paddingTop / 2;
}
@mixin InputField--small() {
	padding-top: 0;
	font-size: $font-base-size;
	height: $InputField-heightI--small + prem(2);
	line-height: $InputField-heightI--small;
}

@mixin InputField--placeholder() {
	color: $var--color-suld-150;
	opacity: 1; // override browser default styling
}
@mixin InputField--filled() {
	--input-border-color: #{$var--color-faxafloi-100};
}
@mixin InputField--invalid() {
	--input-border-color: #{$var--color-heidmork-100};
	color: $var--color-heidmork-100;
}
@mixin InputField--focused() {
	--input-border-color: #{$var--color-faxafloi-100};
	color: $var--color-suld-200;
	box-shadow: inset 0 0 0 prem(1) var(--input-border-color);
	outline: 0;
}
@mixin InputField--disabled() {
	--input-border-color: #{$var--color-suld-100};
	background-color: $var--color-suld-50;
	color: $var--color-suld-100;
	cursor: not-allowed;
}
@mixin InputField--readonly() {
	--input-border-color: #{$var--color-suld-100};
	background-color: $var--color-suld-50;
}

// ---------------------------------------------------------------------------

@mixin FormField__error($paddingLeft: grid-units(2), $marginTop: prem(9)) {
	color: $var--color-heidmork-100;
	font-size: prem($font-size-12);
	line-height: prem(14);
	padding-left: $paddingLeft;
	margin-top: $marginTop;

	&::before {
		@include icon($icons-error);
		margin-right: grid-units(1);
		font-size: prem(10);
	}

	&:not([id]) {
		@include WARNING__(
			'should have id atribute to match input[aria-describedby]',
			$pos: after
		);
	}
}
