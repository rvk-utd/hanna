@use '_globals' as *;
@use 'styles/font' as *;

@media screen {
	.Gallery {
		@include bodyPaddingInner(margin, true);
	
		width: 100vw;
		overflow-y: scroll;

		@media #{$mq-tablet_up} {
			width: auto;
			overflow: visible;
		}

		&__inner {
			position: relative;
		}

		&__track {
			display: flex;
			align-items: flex-end;
			flex-wrap: nowrap;

			margin-left: -(prem($grid-gutter / 2));
			margin-right: -(prem($grid-gutter / 2));

			will-change: transform;

			transition: transform 300ms ease-out;
		}

		&__item {
			flex: none;
			padding: 0 prem($grid-gutter / 2);
		}
	}

	.GalleryItem {
		// <figure>
		flex: none;

		margin: 0;
		padding: 0 prem($grid-gutter / 2);

		&--landscape {
			width: calc(#{cols_pct(5)} + #{$grid-gutter}px);
			// width: prem(480 + $grid-gutter);
		}

		&--portrait {
			width: calc(#{cols_pct(3)} + #{$grid-gutter}px);
			// width: prem(272 + $grid-gutter);
		}

		&__inner {
			position: relative;

			background: $color-suld-50;

			&::before {
				content: '';
				display: block;
			}
		}

		&--landscape &__inner::before {
			padding-bottom: percentage(312/480);
		}

		&--portrait &__inner::before {
			padding-bottom: percentage(376/272);
		}
		
		&__caption {
			@include BodyTextStyle--large($leading: false);

			display: flex;

			// 2x lines + padding
			min-height: calc(2.5em + #{prem(8)});
			padding-top: prem(8);

			line-height: 1.25;
		}
	}

	.GalleryNav {
		display: none;

		@media #{$mq-tablet_up} {
			display: flex;
			align-items: flex-end;
			// justify-content: center;

			// if aligned below
			padding-top: prem(8);

			height: prem(24 + 8);

		&__item {
			flex: none;

			position: relative;

			width: 8px;
			height: 100%;

			margin-left: 4px;
			margin-right: 4px;

			overflow: hidden;
			white-space: nowrap;

			// should be variable for theming??
			background: $color-faxafloi-50;

			transform: scaleY((16/24));
			transform-origin: bottom center;

			transition: transform 100ms ease-in-out;

			&:first-child {
				margin-left: 0;
			}

			&:last-child {
				margin-right: 0;
			}
		}
		
			&__item--isActive {
				background: var(--theme-color-primary);
			
				transform: none;
			}

			&__button {
				display: block;
				width: 100%;
				height: 100%;

				text-indent: 9px;
			}
		}
		
	}
}